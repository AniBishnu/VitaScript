@model List<Vitascript.ViewModel.DrDrType>
@using Vitascript.Models
@{
    ViewBag.Title = "Doctors";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/Content/Home CSS/Doctors.css" />
<link rel="stylesheet" href="~/Content/Site.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />


<div class="dropdown-container">
    @Html.Label("DoctorTypeId", "Filter by Doctor Type", new { @class = "dropdown-label" })

    @Html.DropDownList(
        "DoctorTypeId",
        new SelectList(ViewBag.DoctorTypes as List<DoctorType>, "Id", "Name"),
        "All Types",
        new
        {
            @class = "custom-dropdown",
            id = "DoctorTypeId",
            onchange = "filterByType()"
        }
    )
</div>


<div class="page-header">
    <h1>Our Doctors</h1>
    <p>Meet our experienced medical professionals</p>
</div>

<div class="doctor-cards-grid">
    @foreach (var item in Model)
    {
        <div class="doctor-card">
            <div class="card-header">
                <div class="avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="info">
                    <h2>@item.Doctor.Name</h2>
                    <p class="specialty">@item.DoctorType.Name</p>
                </div>
            </div>
            <div class="card-body">
                <p><strong>Email:</strong> @item.Doctor.Email</p>
                <p><strong>Phone:</strong> @item.Doctor.Phone</p>
            </div>
            
        </div>
    }
</div>


<script> 
    function filterByDoctorType() {
        var dropdown = document.getElementById("DoctorTypeId");
        var selectedValue = dropdown.value;
        var cards = document.querySelectorAll(".doctor-card");

        cards.forEach(function (card) {
            var specialtyText = card.querySelector(".specialty").textContent.trim();

            if (selectedValue === "" || specialtyText === dropdown.options[dropdown.selectedIndex].text) {
                card.style.display = "block";
            } else {
                card.style.display = "none";
            }
        });
    }

    document.getElementById("DoctorTypeId").addEventListener("change", filterByDoctorType);
</script>
